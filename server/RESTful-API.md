二、互联网架构模式——RESTful架构 
RESTful架构，就是目前最流行的一种互联网软件架构。它结构清晰、符合标准、易于理解、扩展方便，所以正得到越来越多网站的采用。但是RESTful架构，并不是一个容易说清楚的问题。下面，我就谈谈我理解的RESTful架构。

  对互联网软件的架构原则，定名为REST，即Representational State Transfer的缩写。翻译是"表现层状态转化"。如果一个架构符合REST原则，就称它为RESTful架构。要理解RESTful架构，最好的方法就是去理解Representational State Transfer这个词组到底是什么意思。

 

①、资源（Resources）

REST的名称"表现层状态转化"中，省略了主语。"表现层"其实指的是"资源"（Resources）的"表现层"。

所谓"资源"，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。

所谓"上网"，就是与互联网上一系列的"资源"互动，调用它的URI。

 

②、表现层（Representation）

"资源"是一种信息实体，它可以有多种外在表现形式。我们把"资源"具体呈现出来的形式，叫做它的"表现层"（Representation）。

比如，文本可以用txt格式表现，也可以用HTML格式、XML格式、JSON格式表现，甚至可以采用二进制格式；图片可以用JPG格式表现，也可以用PNG格式表现。

URI只代表资源的实体，不代表它的形式。严格地说，有些网址最后的".html"后缀名是不必要的，因为这个后缀名表示格式，属于"表现层"范畴，而URI应该只代表"资源"的位置。它的具体表现形式，应该在HTTP请求的头信息中用Accept和Content-Type字段指定，这两个字段才是对"表现层"的描述。

 

③状态转化（State Transfer）

访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。

互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生"状态转化"（State Transfer）。而这种转化是建立在表现层之上的，所以就是"表现层状态转化"。

客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。

综述

　　（1）每一个URI代表一种资源；

　　（2）客户端和服务器之间，传递这种资源的某种表现层；

　　（3）客户端通过四个HTTP动词，对服务器端资源进行操作，实现"表现层状态转化"。

 

REST 指的是一组架构约束条件和原则。满足这些约束条件和原则的应用程序或设计就是 RESTful。

l  每一个URL代表一种资源；资源的表现形式是XML或者HTML；

l  客户端和服务器之间，传递这种资源的某种表现层； 客户端通过四个HTTP动词（GET：获取资源、POST：新建资源、PUT：更新资源、DELETE：删除资源），对服务器端进行操作，实现“表现层状态转化”；

l  客户端与服务端之间的交互在请求之间是无状态的，从客户端到服务端的每个请求都必须包含理解请求所必需的信息。

 

1、如无必要，勿增实体：为什么用？
①、REST便于我们更好的开发

基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存等机制。（对api接口规范、命名规则、返回值、授权验证等进行一定的约束）

 

②、无状态连接的优势

http连接是无状态，符合restful原则的Web API是无状态。

这个状态是对服务器而言的。无状态，意味着服务器不存储客户端的状态，无须在自己这里维护客户端的状态。但是！无状态不代表没有状态，而是说，每次客户端访问服务器，状态都由客户端带过来。换言之，状态不由服务器维护，而是客户端自己维护。客户端你需要什么，服务器就给你什么，服务器只负责提供服务，安安静静地做个美男子。

好处：1、服务器有超然的地位，简化了设计（简单的往往是最好的）

2、利于集群部署（由于无需维护状态，比如啥会话什么的，不用设置专用的缓存服务器）

 

2、刨根问底——技术特点？
REST 的几个特点为：资源、统一接口、URI 和无状态。

资源：所谓"资源"，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，就是一个具体的实在。
统一接口：RESTful 架构风格规定，数据的元操作，即 CRUD(Create，Read，Update 和 Delete，即数据的增删查改)操作，分别对应于 HTTP 方法：GET 用来获取资源，POST 用来新建资源(也可以用于更新资源)，PUT 用来更新资源，DELETE 用来删除资源，这样就统一了数据操作的接口，仅通过 HTTP 方法，就可以完成对数据的所有增删查改工作。
URL：可以用一个 URI(统一资源定位符)指向资源，即每个 URI 都对应一个特定的资源。要获取这个资源，访问它的 URI 就可以，因此 URI 就成了每一个资源的地址或识别符。
无状态：所谓无状态的，即所有的资源，都可以通过 URI 定位，而且这个定位与其他资源无关，也不会因为其他资源的变化而改变。有状态和无状态的区别，举个简单的例子说明一下。
例子：如查询员工的工资，如果查询工资是需要登录系统，进入查询工资的页面，执行相关操作后，获取工资的多少，则这种情况是有状态的。因为查询工资的每一步操作都依赖于前一步操作，只要前置操作不成功，后续操作就无法执行。如果输入一个 URI 即可得到指定员工的工资，则这种情况是无状态的，因为获取工资不依赖于其他资源或状态。且这种情况下，员工工资是一个资源，由一个 URI 与之对应，可以通过 HTTP 中的 GET 方法得到资源，这是典型的 RESTful 风格。

RESTful架构将服务器分成前端服务器和后端服务器两部分，前端服务器为用户提供无模型视图；后端服务器为前端服务器提供接口。浏览器向前端服务器请求视图，通过视图中包含的AJAX函数发起接口请求获取模型。 RESTful架构时对MVC架构改进后形成的一种架构，通过使用事先定义好的接口与不同的服务联系起来。在REST’ful架构中，浏览器使用POST，DELETE，PUT，GET四种请求方式分别对指定的URL资源进行增删改查操作。因此，RESTful是通过URI实现对资源的管理及访问，具有扩展性强、结构清晰的特点。

 

RESTful6大原则：

C-S架构、
无状态（对服务器而言，意味着服务器不存储客户端的状态，无须在自己这里维护客户端的状态，服务器只负责提供服务，客户端你需要什么，服务器就给你什么【简化了设计,服务器有超然的地位】, 利于集群部署（由于无需维护状态，比如啥会话什么的，不用设置专用的缓存服务器）
统一的接口；一致的数据格式；系统分层；可缓存；按需编码，可定制编码（可选）；
restful其实就是一套编写接口的协议，协议规定如何编写以及如何设置返回值、状态码等信息。
最显著的特点：restful:给用户一个url，根据method不同在后端做不同的处理，比如：post 创建数据、get获取数据、put和patch修改数据、delete删除数据。
 

3、技术双刃剑——注意事项？
不适应于所有的项目，当项目比较小时使用RestFul架构，项目变得更复杂；

 

RESTful架构有一些典型的设计误区。

（1）、最常见的一种设计错误，就是URI包含动词。因为"资源"表示一种实体，所以应该是名词，URI不应该有动词，动词应该放在HTTP协议中。举例来说，某个URI是/posts/show/1，其中show是动词，这个URI就设计错了，正确的写法应该是/posts/1，然后用GET方法表示show。如果某些动作是HTTP动词表示不了的，你就应该把动作做成一种资源。比如网上汇款，从账户1向账户2汇款500元，错误的URI是：POST /accounts/1/transfer/500/to/2；正确的写法是把动词transfer改成名词transaction，资源不能是动词，但是可以是一种服务：POST /transaction HTTP/1.1   Host: 127.0.0.1  from=1&to=2&amount=500.00

（2）另一个设计误区，就是在URI中加入版本号：

　　http://www.example.com/app/1.0/foo

　　http://www.example.com/app/1.1/foo

　　http://www.example.com/app/2.0/foo

因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。版本号可以在HTTP请求头信息的Accept字段中进行区分：

　　Accept: vnd.example-com.foo+json; version=1.0

　　Accept: vnd.example-com.foo+json; version=1.1

　　Accept: vnd.example-com.foo+json; version=2.0