# 主键索引和唯一索引的区别

## -- 区别

- 主键是一种约束，唯一索引是一种索引，两者在本质上是不同的
- 主键创建后一定包含一个唯一性索引，唯一性索引并不一定就是主键。
- 唯一性索引列允许空值，而主键列不允许为空值。
- 主键列在创建时，已经默认为空值 + 唯一索引了。
- 主键可以被其他表引用为外键，而唯一索引不能。
- 一个表最多只能创建一个主键，但可以创建多个唯一索引。
- 主键更适合那些不容易更改的唯一标识，如自动递增列、身份证号等。
- 在 RBO 模式下，主键的执行计划优先级要高于唯一索引。 两者可以提高查询的速度。



-- 创建一张仅包含主键和唯一索引的表
`CREATE TABLE test`
`(PrimaryKey VARCHAR2(20),`
`UniqueKey  VARCHAR2(20)`
`);`



-- 分别创建主键和唯一索引，语法不同
ALTER TABLE test ADD CONSTRAINT test_PrimaryKey PRIMARY KEY (PrimaryKey);
CREATE UNIQUE INDEX test_UniqueKey ON test (UniqueKey);
-- 在 USER_INDEXES 中可以看到两个索引名称
SELECT table_name,table_type,index_name,index_type,uniqueness
FROM USER_INDEXES
WHERE TABLE_NAME='TEST';
-- 在 USER_IND_COLUMNS 中可以看到两个索引字段名称
SELECT table_name,index_name,column_name,column_position
FROM USER_IND_COLUMNS
WHERE TABLE_NAME='TEST';
-- 在 USER_CONSTRAINTS 仅可以看到主键约束名称
SELECT table_name,constraint_name,constraint_type
FROM USER_CONSTRAINTS
WHERE TABLE_NAME='TEST';
-- 在 USER_CONS_COLUMNS 仅可以看到主键约束字段名称
SELECT table_name,constraint_name,column_name,position
FROM USER_CONS_COLUMNS
WHERE CONSTRAINT_NAME IN (SELECT CONSTRAINT_NAME
FROM USER_CONSTRAINTS
WHERE TABLE_NAME='TEST');



-- 为唯一索引增加一个非空约束
ALTER TABLE test MODIFY UniqueKey NOT NULL;
-- 在 USER_CONSTRAINTS 仅可以看到主键约束名称和非空约束名称
SELECT table_name,constraint_name,constraint_type
FROM USER_CONSTRAINTS
WHERE TABLE_NAME='TEST'
-- 在 USER_CONS_COLUMNS 仅可以看到主键约束字段名称和非空约束字段名称
SELECT table_name,constraint_name,column_name,position
FROM USER_CONS_COLUMNS
WHERE CONSTRAINT_NAME IN (SELECT CONSTRAINT_NAME
FROM USER_CONSTRAINTS
WHERE TABLE_NAME='TEST')